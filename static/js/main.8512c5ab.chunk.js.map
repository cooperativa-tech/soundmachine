{"version":3,"sources":["state.js","components/Keys.js","db.js","ipfs.js","pages/index.js","components/Jorge.js","components/face.png","components/mouth.png","test.worker.js","components/Download.js","components/KeyboardNameInput.js","components/Share.js","serviceWorker.js","index.js"],"names":["audioContext","window","AudioContext","webkitAudioContext","analyser","createScriptProcessor","connect","destination","state","sourceNode","mediaRecorder","recording","chunks","pressedKeys","lastRecordingURL","lastRecordingBlob","sharingFocused","mouthPosition","Key","_ref","leftMargin","selected","hasRecording","isRecording","props","Object","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","_emotion_core__WEBPACK_IMPORTED_MODULE_1__","assign","css","width","height","display","alignItems","justifyContent","background","boxShadow","boxSizing","borderRadius","color","marginLeft","position","textTransform","keycode","Row","children","db","__webpack_require__","Dexie","version","stores","keys","keyboards","workerReady","worker","MyWorker","addEventListener","data","message","once","share","_ref2","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","wrap","_context","prev","next","Promise","resolve","setTimeout","check","console","log","postMessage","abrupt","reject","_ref3","hash","stop","apply","this","arguments","download","_ref4","_callee2","_context2","_ref5","_x","FIRST_ROW","SECOND_ROW","THIRD_ROW","ALL_KEYS","concat","Keyboards","_useState","useState","_useState2","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_9__","setKeyboards","load","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_8__","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default","toArray","sent","_emotion_core__WEBPACK_IMPORTED_MODULE_12__","reactjs_popup__WEBPACK_IMPORTED_MODULE_13__","trigger","backgroundColor","fontSize","padding","marginRight","onOpen","contentStyle","modal","length","react__WEBPACK_IMPORTED_MODULE_11___default","Fragment","map","name","key","href","location","navigator","mediaDevices","getUserMedia","audio","then","stream","globalState","MediaRecorder","ondataavailable","e","push","onstop","blob","Blob","type","URL","createObjectURL","error","catch","err","Player","_this","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","downHandler","lowerKey","_","toLower","includes","reduce","memo","value","tKey","setState","_objectSpread","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","playClip","start","upHandler","warn","setImmediate","saveClip","loadSound","url","request","XMLHttpRequest","open","responseType","onload","response","onerror","send","recordings","put","_ref6","_callee3","_context3","disconnect","createBufferSource","decodeAudioData","buffer","loop","_x2","loading","_context4","t0","removeEventListener","React","Component","__webpack_exports__","_ref7","styles","_templateObject","_components_Download__WEBPACK_IMPORTED_MODULE_17__","style","flexDirection","_components_Keys__WEBPACK_IMPORTED_MODULE_14__","index","marginTop","left","transform","_components_Jorge__WEBPACK_IMPORTED_MODULE_15__","_components_Share__WEBPACK_IMPORTED_MODULE_16__","Jorge","_React$Component","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","ref","createRef","update","current","onaudioprocess","int","inputBuffer","getChannelData","out","outputBuffer","i","Math","abs","requestAnimationFrame","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","_emotion_core__WEBPACK_IMPORTED_MODULE_6__","src","face","top","transition","zIndex","mouth","module","exports","p","Worker","__webpack_public_path__","hashInQueryParams","obj","match","result","re","RegExp","exec","document","search","querystring","Download","_home_runner_work_soundmachine_soundmachine_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","setLoading","handleDownload","split","_emotion_core__WEBPACK_IMPORTED_MODULE_5__","reactjs_popup__WEBPACK_IMPORTED_MODULE_4__","react__WEBPACK_IMPORTED_MODULE_3___default","marginBottom","onClick","KeyboardNameInput","slicedToArray","setName","core_browser_esm","placeholder","onChange","target","fontFamily","paddingTop","paddingBottom","paddingLeft","borderColor","borderWidth","paddingRight","disabled","onComplete","Share","useEffect","reactjs_popup_es","asyncToGenerator","regenerator_default","onClose","react_default","Boolean","hostname","ReactDOM","render","createElement","pages","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8512c5ab.chunk.js","sourcesContent":["const Context = window.AudioContext || window.webkitAudioContext;\nconst audioContext = new Context();\nconst analyser = audioContext.createScriptProcessor(4096, 1, 1);\nanalyser.connect(audioContext.destination);\n\nconst state = {\n  audioContext,\n  analyser,\n  sourceNode: null,\n  mediaRecorder: null,\n  recording: null,\n  chunks: [],\n  pressedKeys: {},\n  lastRecordingURL: null,\n  lastRecordingBlob: null,\n  sharingFocused: false,\n  mouthPosition: 0\n};\n\nexport default state;\n","/** @jsx jsx */\nimport { jsx } from \"@emotion/core\";\nimport React from \"react\";\n\nexport const Key = ({ leftMargin, selected, hasRecording, isRecording, ...props }) => (\n  <div\n    css={{\n      width: 70,\n      height: 70,\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      background: selected && isRecording\n      ? \"#E24E4E\"\n      : hasRecording\n      ? \"#0078F0\"\n      : \"#2D2D2D\",\n      boxShadow: hasRecording ? \"0px 12px 20px rgba(0, 120, 240, 0.28)\" : \"0px 8px 20px rgba(22, 22, 22, 0.28)\",\n      boxSizing: \"border-box\",\n      borderRadius: 8,\n      color: \"#FFF\",\n      marginLeft: leftMargin ? 10 : 0,\n      position: \"relative\",\n      textTransform: \"uppercase\",\n    }}\n    {...props}\n  >\n    <span>{props.keycode}</span>\n  </div>\n);\n\nexport const Row = props => (\n  <div\n    css={{\n      display: \"flex\"\n    }}\n    {...props}\n  >\n    {props.children}\n  </div>\n);\n","import Dexie from \"dexie\";\n\nconst db = new Dexie(\"Button\");\n\ndb.version(1).stores({\n  keys: \"key\"\n});\n\ndb.version(2).stores({\n  keys: \"key\",\n  keyboards: \"hash\"\n});\n\nexport default db;\n","import MyWorker from \"./test.worker\";\n\nlet workerReady = false;\nconst worker = new MyWorker();\n\nworker.addEventListener(\n  \"message\",\n  ({ data }) => {\n    if (data.message === \"ready\") workerReady = true;\n  },\n  {\n    once: true\n  }\n);\n\nexport const share = async () => {\n  if (!workerReady) {\n    await new Promise(resolve => {\n      const check = () => {\n        if (workerReady) resolve();\n        else setTimeout(check, 200);\n      };\n\n      setTimeout(check, 200);\n    });\n  }\n\n  console.log(\"starting share\");\n\n  worker.postMessage({ message: \"share\" });\n\n  return new Promise((resolve, reject) => {\n    worker.addEventListener(\n      \"message\",\n      ({ data }) => {\n        if (data.message === \"share\") resolve(data.hash);\n        else reject(\"invalid message received\");\n      },\n      {\n        once: true\n      }\n    );\n  });\n};\n\nexport const download = async hash => {\n  if (!workerReady) {\n    await new Promise(resolve => {\n      const check = () => {\n        if (workerReady) resolve();\n        else setTimeout(check, 200);\n      };\n\n      setTimeout(check, 200);\n    });\n  }\n\n  console.log(\"starting download\");\n\n  worker.postMessage({ message: \"download\", hash });\n\n  return new Promise((resolve, reject) => {\n    worker.addEventListener(\n      \"message\",\n      ({ data }) => {\n        console.log(\"cko asiasdfksadf\");\n        if (data.message === \"download\") {\n          resolve();\n        } else reject(\"invalid message received\");\n      },\n      {\n        once: true\n      }\n    );\n  });\n};\n","/** @jsx jsx */\n\nimport _ from \"lodash\";\nimport React, { useState } from \"react\";\nimport { Global, css, jsx } from \"@emotion/core\";\nimport Popup from \"reactjs-popup\";\n\nimport { Key, Row } from \"../components/Keys\";\nimport { Jorge } from \"../components/Jorge\";\nimport { Share } from \"../components/Share\";\nimport { Download } from \"../components/Download\";\nimport globalState from \"../state\";\nimport db from \"../db\";\n\nconst FIRST_ROW = [\"q\", \"w\", \"e\", \"r\", \"t\", \"y\", \"u\", \"i\", \"o\", \"p\"];\nconst SECOND_ROW = [\"a\", \"s\", \"d\", \"f\", \"g\", \"h\", \"j\", \"k\", \"l\"];\nconst THIRD_ROW = [\"z\", \"x\", \"c\", \"v\", \"b\", \"n\", \"m\"];\nconst ALL_KEYS = [...FIRST_ROW, ...SECOND_ROW, ...THIRD_ROW];\n\nwindow.navigator.mediaDevices\n  .getUserMedia({\n    audio: true\n  })\n  .then(stream => {\n    try {\n      globalState.mediaRecorder = new MediaRecorder(stream);\n\n      globalState.mediaRecorder.ondataavailable = function(e) {\n        if (globalState.recording) {\n          globalState.chunks.push(e.data);\n        }\n      };\n\n      globalState.mediaRecorder.onstop = () => {\n        const blob = new Blob(globalState.chunks, {\n          type: \"audio/ogg; codecs=opus\"\n        });\n        globalState.chunks = [];\n        globalState.lastRecordingBlob = blob;\n        globalState.lastRecordingURL = window.URL.createObjectURL(blob);\n      };\n    } catch (e) {\n      console.error(e);\n    }\n  })\n  .catch(err => console.error(err));\n\nfunction Keyboards() {\n  const [keyboards, setKeyboards] = useState([]);\n\n  const load = async () => {\n    const keyboards = await db.keyboards.toArray();\n    setKeyboards(keyboards);\n  };\n\n  return (\n    <Popup\n      trigger={\n        <button\n          css={{\n            backgroundColor: \"#2D2D2D\",\n            color: \"white\",\n            fontSize: 20,\n            padding: `10px 20px`,\n            marginRight: 40,\n            borderRadius: 4\n          }}\n        >\n          Your keyboards\n        </button>\n      }\n      onOpen={load}\n      contentStyle={{ padding: 40 }}\n      modal\n    >\n      <div>\n        {keyboards.length > 0 ? (\n          <>\n            <h4>Your keyboards:</h4>\n            <ul>\n              {keyboards.map(({ hash, name }) => (\n                <li key={hash}>\n                  <a href={`${window.location}?hash=${hash}`}>{name}</a>\n                </li>\n              ))}\n            </ul>\n          </>\n        ) : (\n          <p>You don't have any saved saved keyboards.</p>\n        )}\n      </div>\n    </Popup>\n  );\n}\n\nclass Player extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      pressedKeys: {},\n      recording: false,\n      recordings: {},\n      loading: true\n    };\n  }\n\n  async componentDidMount() {\n    window.addEventListener(\"keydown\", this.downHandler);\n    window.addEventListener(\"keyup\", this.upHandler);\n\n    try {\n      const keys = await db.keys.toArray();\n\n      this.setState({\n        recordings: keys.reduce((memo, key) => {\n          memo[key.key] = window.URL.createObjectURL(key.blob);\n          return memo;\n        }, {})\n      });\n    } catch (e) {\n      console.error(e);\n    }\n\n    this.setState({ loading: false });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.downHandler);\n    window.removeEventListener(\"keyup\", this.upHandler);\n  }\n\n  downHandler = ({ key }) => {\n    if (globalState.sharingFocused) return;\n\n    const lowerKey = _.toLower(key);\n    if (!_.includes(ALL_KEYS, lowerKey)) return;\n    if (globalState.pressedKeys[lowerKey]) return;\n\n    const anyPressed = _.reduce(\n      globalState.pressedKeys,\n      (memo, value, tKey) => memo || (value && lowerKey !== tKey),\n      false\n    );\n\n    if (anyPressed) return;\n\n    globalState.pressedKeys[lowerKey] = true;\n\n    this.setState({\n      ...this.state,\n      recording: { ...this.state.recording },\n      pressedKeys: { ...this.state.pressedKeys, [lowerKey]: true }\n    });\n\n    if (lowerKey === key) {\n      this.playClip(key);\n    } else {\n      if (globalState.recording) return;\n      console.log(\"recording\");\n      globalState.mediaRecorder.start();\n      globalState.recording = true;\n    }\n  };\n\n  upHandler = ({ key }) => {\n    if (globalState.sharingFocused) return;\n\n    const lowerKey = _.toLower(key);\n    if (!_.includes(ALL_KEYS, lowerKey)) return;\n    if (!globalState.pressedKeys[lowerKey]) return;\n\n    globalState.pressedKeys[lowerKey] = false;\n\n    this.setState({\n      ...this.state,\n      recording: { ...this.state.recording },\n      pressedKeys: { ...this.state.pressedKeys, [lowerKey]: false }\n    });\n\n    if (!globalState.recording) return;\n\n    console.log(\"saving recording\");\n    try {\n      globalState.mediaRecorder.stop();\n    } catch (e) {\n      console.warn(e);\n    }\n    setImmediate(() => {\n      this.saveClip(lowerKey);\n      globalState.recording = false;\n    });\n  };\n\n  loadSound = url => {\n    return new Promise(resolve => {\n      var request = new XMLHttpRequest();\n      request.open(\"GET\", url, true);\n      request.responseType = \"arraybuffer\";\n\n      request.onload = function() {\n        resolve(request.response);\n      };\n\n      request.onerror = function() {\n        console.error(arguments);\n      };\n\n      request.send();\n    });\n  };\n\n  saveClip = async key => {\n    if (!globalState.lastRecordingURL)\n      return setImmediate(() => this.saveClip(key));\n\n    this.setState({\n      recordings: {\n        ...this.state.recordings,\n        [key]: globalState.lastRecordingURL\n      }\n    });\n\n    globalState.lastRecordingURL = null;\n\n    await db.keys.put({\n      key,\n      blob: globalState.lastRecordingBlob\n    });\n  };\n\n  playClip = async key => {\n    const url = this.state.recordings[key];\n\n    if (!url) return;\n\n    try {\n      if (globalState.sourceNode) {\n        globalState.sourceNode.stop();\n        globalState.sourceNode.disconnect(globalState.analyser);\n      }\n    } catch (e) {\n      console.warn(e);\n    }\n\n    globalState.sourceNode = globalState.audioContext.createBufferSource();\n    globalState.sourceNode.connect(globalState.analyser);\n\n    const response = await this.loadSound(url);\n\n    globalState.audioContext.decodeAudioData(\n      response,\n      buffer => {\n        console.log(\"buffer\", buffer);\n        globalState.sourceNode.buffer = buffer;\n        globalState.sourceNode.loop = false;\n        globalState.sourceNode.start(0);\n      },\n      err => console.error(err)\n    );\n  };\n\n  render() {\n    if (this.state.loading) return null;\n\n    return this.props.children(this.state);\n  }\n}\n\nexport default () => {\n  return (\n    <Player>\n      {({ pressedKeys, recording, recordings }) => (\n        <div>\n          <Global\n            styles={css`\n              html,\n              body {\n                background-color: white;\n                color: #1b1b1b;\n                font-size: 18;\n                line-height: 1;\n                font-family: Arial;\n              }\n\n              body {\n                padding: 40px;\n              }\n            `}\n          />\n          <Download />\n          <h1>Push to Talk</h1>\n          <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n            <div\n              css={{\n                padding: 40,\n                display: \"flex\",\n                justifyContent: \"flex-start\",\n                alignItems: \"flex-start\",\n                flexDirection: \"column\"\n              }}\n            >\n              <Row>\n                {FIRST_ROW.map((key, index) => (\n                  <Key\n                    selected={pressedKeys[key]}\n                    hasRecording={!!recordings[key]}\n                    isRecording={recording}\n                    key={key}\n                    leftMargin={index !== 0}\n                    keycode={key}\n                  />\n                ))}\n              </Row>\n              <Row css={{ marginLeft: 20, marginTop: 10 }}>\n                {SECOND_ROW.map((key, index) => (\n                  <Key\n                    selected={pressedKeys[key]}\n                    hasRecording={!!recordings[key]}\n                    isRecording={recording}\n                    key={key}\n                    leftMargin={index !== 0}\n                    keycode={key}\n                  />\n                ))}\n              </Row>\n              <Row\n                css={{ marginLeft: 50, marginTop: 10, position: \"relative\" }}\n              >\n                {THIRD_ROW.map((key, index) => (\n                  <Key\n                    selected={pressedKeys[key]}\n                    key={key}\n                    hasRecording={!!recordings[key]}\n                    isRecording={recording}\n                    leftMargin={index !== 0}\n                    keycode={key}\n                  />\n                ))}\n                <Key\n                  css={{\n                    width: 100,\n                    position: \"absolute\",\n                    left: \"0\",\n                    transform: \"translateX(calc(-100% - 10px))\"\n                  }}\n                  selected={false}\n                  hasRecording={false}\n                  isRecording={false}\n                  keycode=\"Shift\"\n                />\n              </Row>\n            </div>\n          </div>\n          <Jorge />\n          <Share />\n          <Keyboards />\n        </div>\n      )}\n    </Player>\n  );\n};\n","/** @jsx jsx */\nimport React from \"react\";\nimport { jsx } from \"@emotion/core\";\n\nimport globalState from \"../state\";\n\nimport face from \"./face.png\";\nimport mouth from \"./mouth.png\";\n\nexport class Jorge extends React.Component {\n  constructor() {\n    super();\n    this.ref = React.createRef();\n\n    const update = () => {\n      if (this.ref.current)\n        this.ref.current.style.transform = `translate(-50%, calc(-50% + ${globalState.mouthPosition}px))`;\n    };\n\n    globalState.analyser.onaudioprocess = e => {\n      var int = e.inputBuffer.getChannelData(0);\n      var out = e.outputBuffer.getChannelData(0);\n\n      for (var i = 0; i < int.length; i++) {\n        out[i] = int[i];\n\n        if (int[i] !== 0) {\n          globalState.mouthPosition = Math.abs(int[i]) * 100;\n          window.requestAnimationFrame(update);\n        }\n      }\n    };\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  render() {\n    return (\n      <div css={{ position: \"relative\", width: 300 }}>\n        <img\n          css={{\n            width: \"100%\"\n          }}\n          src={face}\n        />\n        <img\n          ref={this.ref}\n          css={{\n            position: \"absolute\",\n            width: \"100%\",\n            top: \"50%\",\n            left: \"50%\",\n            transform: `translate(-50%, calc(-50% + ${globalState.mouthPosition}px))`,\n            transition: \"all linear 0.3s\",\n            zIndex: 9\n          }}\n          src={mouth}\n        />\n      </div>\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"static/media/face.f302813b.png\";","module.exports = __webpack_public_path__ + \"static/media/mouth.9227568e.png\";","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"808c6dcf71f2b8cb3fce.worker.js\");\n};","/** @jsx jsx */\n\nimport React, { useState } from \"react\";\nimport Popup from \"reactjs-popup\";\nimport { jsx } from \"@emotion/core\";\n\nimport { download } from \"../ipfs\";\n\nconst hashInQueryParams = querystring(\"hash\")[0];\n\nfunction querystring(obj) {\n  const result = [];\n  let match;\n  const re = new RegExp(\"(?:\\\\?|&)\" + obj + \"=(.*?)(?=&|$)\", \"gi\");\n  while ((match = re.exec(document.location.search)) !== null) {\n    result.push(match[1]);\n  }\n  return result;\n}\n\nexport function Download() {\n  const [loading, setLoading] = useState(false);\n\n  const handleDownload = async () => {\n    setLoading(true);\n    await download(hashInQueryParams);\n    window.location = window.location.href.split(\"?\")[0];\n  };\n\n  return hashInQueryParams ? (\n    <Popup contentStyle={{ padding: 40 }} modal open>\n      {loading ? (\n        <div>loading...</div>\n      ) : (\n        <>\n          <div css={{ marginBottom: 20 }}>\n            Do you want to replace your existing keyboard with the new one?\n          </div>\n          <button onClick={handleDownload} css={{ marginRight: 20 }}>\n            Yes!\n          </button>\n          <button\n            onClick={() => {\n              window.location = window.location.href.split(\"?\")[0];\n            }}\n          >\n            No\n          </button>\n        </>\n      )}\n    </Popup>\n  ) : null;\n}\n","/** @jsx jsx */\n\nimport React, { useState } from \"react\";\nimport { jsx } from \"@emotion/core\";\n\nexport function KeyboardNameInput(props) {\n  const [name, setName] = useState(\"\");\n\n  return (\n    <div css={{ display: 'flex', alignItems: 'center' }}>\n      <input\n        placeholder=\"Your keyboard's name\"\n        value={name}\n        onChange={e => setName(e.target.value)}\n        css={{\n          fontSize: 'inherit',\n          fontFamily: 'inherit',\n          height: 40,\n          paddingTop: 0,\n          paddingBottom: 0,\n          paddingLeft: 10,\n          borderColor: \"#2D2D2D\",\n          borderRadius: 4,\n          borderWidth: 2,\n          paddingRight: 10,\n          marginRight: 10\n        }}\n      />\n      <button disabled={!name} onClick={() => props.onComplete(name)} css={{\n        backgroundColor: \"#2D2D2D\",\n        color: \"white\",\n        fontSize: 20,\n        padding: `10px 20px`,\n        borderRadius: 4\n      }}>\n        Share keyboard\n      </button>\n    </div>\n  );\n}\n","/** @jsx jsx */\n\nimport React, { useState, useEffect } from \"react\";\nimport { jsx } from \"@emotion/core\";\nimport Popup from \"reactjs-popup\";\n\nimport globalState from \"../state\";\nimport db from \"../db\";\nimport { share } from \"../ipfs\";\nimport { KeyboardNameInput } from \"./KeyboardNameInput\";\n\nexport function Share() {\n  const [state, setState] = useState({ hash: null, name: null });\n\n  useEffect(() => {\n    if (!!state.name && !!state.hash) {\n      db.keyboards\n        .put(state)\n        .then(console.log)\n        .catch(console.error);\n    }\n  }, [state]);\n\n  return (\n    <Popup\n      trigger={\n        <button\n          css={{\n            backgroundColor: \"#2D2D2D\",\n            color: \"white\",\n            fontSize: 20,\n            padding: `10px 20px`,\n            marginRight: 40,\n            borderRadius: 4\n          }}\n        >\n          Save and Share\n        </button>\n      }\n      modal\n      position=\"right center\"\n      onOpen={() => {\n        globalState.sharingFocused = true;\n\n        share().then(async hash => {\n          await db.keyboards.put({ hash, name: \"my random name\" });\n          setState({ ...state, hash });\n        });\n      }}\n      onClose={() => {\n        globalState.sharingFocused = false;\n        setState({ hash: null, name: null });\n      }}\n      contentStyle={{ padding: 40, borderRadius: 4 }}\n    >\n      <>\n        {!state.name ? (\n          <KeyboardNameInput\n            onComplete={name => setState({ ...state, name })}\n          />\n        ) : !state.hash ? (\n          <div>loading...</div>\n        ) : (\n          <div>\n            <p>Share this link</p>\n            <a\n              href={`${window.location}?hash=${state.hash}`}\n            >{`${window.location}?hash=${state.hash}`}</a>\n          </div>\n        )}\n      </>\n    </Popup>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./pages\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}